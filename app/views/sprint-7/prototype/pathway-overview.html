{% extends "sprint-7/prototype/layout.html" %}
{% block pageTitle %} {{pathway.short_name}} Overview {% endblock %}
{% block breadCrumb%}
<div class="govuk-width-container ">
    {{ govukBreadcrumbs({
    items: breadcrumb_items
    }) }}
</div>
{% endblock %}

{% block content %}

<div class="govuk-grid-row">


  <h1 class="govuk-heading-xl">{{ pathway.long_name }}</h1>

  <p>{{ pathway.intro_text }}</p>

    {% if pathway.number_completed == pathway.number_of_questions %}

    {{
        govukPanel({
            titleText: "Congratulations",
            html: "You have met all "+pathway.number_of_questions+" controls associated"
        })
    }}

    {% if pathway.slug == 'NHSDSPT' or pathway.slug == 'PSN' %}
        <h2 class="govuk-heading-l govuk-!-margin-bottom-3 govuk-!-margin-top-6">Submit results</h2>
        <p class="govuk-body govuk-!-margin-bottom-6">Submit your results from this self assessment to {{ pathway.short_name }}.</p>
        <a href="#" role="button" draggable="false" class="govuk-button govuk-button--start" data-module="govuk-button">
            Submit results to {{ pathway.short_name }}
            <svg class="govuk-button__start-icon" xmlns="http://www.w3.org/2000/svg" width="17.5" height="19" viewBox="0 0 33 40" aria-hidden="true" focusable="false">
              <path fill="currentColor" d="M0 0h13l20 20-20 20H0l20-20z" />
            </svg>
        </a>
    {% endif %}

    {% else %}

    <div class="progress-container">
        <div class="progress-info">
            <h2 class="govuk-heading-l">{{pathway.short_name}} controls met</h2>
            <p class="govuk-heading-l">{{pathway.number_completed}}/{{pathway.number_of_questions}}</p>
        </div>
        <div class="progress__bar"><span style="width: {{ pathway.percentage_complete }}%"></span></div>
        <p>There are {{ pathway.number_of_questions }} controls for {{ pathway.short_name }} and you have met {{ pathway.number_completed }}</p>
        <p class="govuk-body">Testing purposes only: <a href="{{mark_as_met}}">Mark all questions as met</a></p>
    </div>

    {% endif %}

        {{ govukTable({
        caption: pathway.short_name + " Controls",
        captionClasses: "govuk-table__caption--m",
        firstCellIsHeader: true,
        head: table_header,
        rows: table_rows

        }) }}
    </div>

{% endblock %}
